<?xml version="1.0"?>
<card xmlns="http://sourceforge.net/projects/firemox"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://sourceforge.net/projects/firemox ../../validator.xsd"
	name="Mana Flare">
	<rules-author-comment>By Fabdouglas</rules-author-comment>

	<!--  {2}{r} whenever a player taps a land for mana, that player adds one mana of that type to his or her mana pool. 
		
		Text(4th/5th+errata): 
		Whenever a player taps a land for mana, that player adds one mana of that 
		type to his or her mana pool. [Oracle 2000/10/24]
		This is a triggered mana ability.  See Rule A.6.4. [D'Angelo 2000/03/03]
		Mana Flare adds one of whatever color the land produces after applying any 
		land type or color changing effects. [Duelist Magazine #6, Page 130] 
		See Rule K.15.6.
		When used with lands that produce multiple colors, such as Badlands, Mana 
		Flare produces 2 of one color, not one of each. [bethmo 1994/05/12]
		When used with Urza's lands (and other colorless producing lands) they 
		produce one extra colorless mana each. [bethmo 1994/05/12]
		Only produces extra mana when land is tapped for mana, not when tapped by 
		Twiddle or for some other effect. [bethmo 1994/04/01]
		Applies to all players in multiplayer games. [Duelist Magazine #4, Page 64]
		If the land produces more than one color or type of mana at a single time, 
		such as with Balduvian Trading Post, you choose which kind of mana the Mana 
		Flare actually provides. [Duelist Magazine #12, Page 26]
		Any restrictions on the mana generated by the land are copied along with the 
		color. [bethmo 1996/12/07]
		The mana is provided when the triggered ability (see Rule A.4) resolves. 
		[Duelist Magazine #18, Page 29]
	-->
	<init>
		<registers>
			<register index="colorless" value="2" />
			<register index="red" value="1" />
		</registers>
		<colors>red</colors>
		<idcards>global-enchantment</idcards>
	</init>
	<abilities>
		<ability ref="cast-spell" />

		<triggered-ability zone="play" resolution="hidden">
			<become-tapped>
				<test>
					<has-idcard idcard="land" />
				</test>
			</become-tapped>
			<effects>
				<create-ability>
					<save target="context.event-source" />
					<triggered-ability zone="play" optimize="choice">
						<given-mana color="nocare">
							<source-test>
								<is target="saved" />
							</source-test>
						</given-mana>
						<effects>
							<unregister-this />
							<give-mana color="context.int" value="1" to="context.player">
								<!-- restriction ref="context.test"/ -->
							</give-mana>
						</effects>
					</triggered-ability>
					<until>
						<end-of-phase phase="nocare" />
					</until>
				</create-ability>
			</effects>
		</triggered-ability>
	</abilities>
</card>
